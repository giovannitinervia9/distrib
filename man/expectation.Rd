% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/numerical_functions.R
\name{expectation}
\alias{expectation}
\title{Calculate the Expected Value of a Function}
\usage{
expectation(distrib, f, theta, ...)
}
\arguments{
\item{distrib}{An object of class \code{"distrib"}}

\item{f}{A function representing the transformation of the random variable \eqn{y}.
\strong{Signature:} It must accept arguments \code{y}, \code{theta}, and \code{...} (see Details).}

\item{theta}{A named list of parameters for the distribution.}

\item{...}{Additional arguments passed directly to the function \code{f}.
These allow parametrizing the transformation function (e.g., passing an exponent or shift parameter).}
}
\value{
A numeric vector containing the expected values. The length corresponds to the
longest parameter vector in \code{theta}.
}
\description{
Computes the expected value of a given function \eqn{f(y)} with respect to a probability distribution defined by \code{distrib}.
It automatically handles continuous distributions (via numerical integration) and discrete distributions (via series summation).
}
\details{
The function calculates:
\itemize{
\item \eqn{E[f(Y)] = \int_{lb}^{ub} f(y, \theta, \dots) \cdot p(y|\theta) \, dy} (Continuous)
\item \eqn{E[f(Y)] = \sum_{y=lb}^{ub} f(y, \theta, \dots) \cdot P(y|\theta)} (Discrete)
}

\strong{Requirements for \code{f}:}
The user-provided function \code{f} must be defined with the signature:
\code{f(y, theta, ...)}
where:
\itemize{
\item \code{y}: The integration/summation variable (numeric vector).
\item \code{theta}: A named list of parameters for the distribution (e.g., \code{list(mu=2, theta=1)}).
\item \code{...}: Optional additional arguments to support custom parameters passed via \code{expectation}.
}
}
\examples{
\dontrun{
# Example 1: Expected value of y^gamma (Raw Moment)
distrib <- negbin_distrib()
theta <- list(mu = 10, theta = 1)

# Define f accepting y, theta, and extra parameter gamma
f_pow <- function(y, theta, gamma = 1) {
  y^gamma
}

# Calculate E[y^2]
expectation(distrib, f_pow, theta, gamma = 2)

# Example 2: Trig transformation
f_trig <- function(y, theta, ...) {
  sin(y)
}
expectation(distrib, f_trig, theta)
}

}
